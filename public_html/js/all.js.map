{"version":3,"sources":["Tranc.js","App.js","Http.js","NGAc.js","NGChip.js","Notify.js","File.js","Preloader.js","Route.js","AdminCtrl.js","AuthCtrl.js","NGTable.js","Admin/ConstCtrl.js","Admin/CostCtrl.js","Admin/CustomerCtrl.js","Admin/CustomerListCtrl.js","Admin/FlowerCtrl.js","Admin/FlowerPackageCtrl.js","Admin/FlowerPacketCtrl.js","Admin/GroupCtrl.js","Admin/LogCtrl.js","Admin/OrderCtrl.js","Admin/OrderReportCtrl.js","Admin/ProductCtrl.js","Admin/ProfileCtrl.js","Admin/RoleCtrl.js","Chart.js","SelectSm.js","tree.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5rBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxDA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["'use strict';\r\n\r\nfunction deepFind(obj, path) {\r\n    var paths = path.split('.')\r\n        , current = obj\r\n        , i;\r\n\r\n    for (i = 0; i < paths.length; ++i) {\r\n        if (current[paths[i]] == undefined) {\r\n            return undefined;\r\n        } else {\r\n            current = current[paths[i]];\r\n        }\r\n    }\r\n    return current;\r\n}\r\n\r\nfunction trans(where, attr) {\r\n    var _tmp = deepFind(_trans_en, where);\r\n    if (!_tmp) {\r\n        return where;\r\n    }\r\n    for (var i in attr) {\r\n        _tmp = _tmp.replace(':' + i, attr[i]);\r\n    }\r\n\r\n    return _tmp;\r\n}\r\n\r\nvar _trans = {\r\n    'message': {\r\n        'title_delete': 'آیا مطمئن به حذف رکورد مورد نظر هستید؟',\r\n        'content_delete': 'عنوان رکورد مورد نظر برای حذف :attr می باشد',\r\n        'set_record': 'اطلاعات :attr با موفقیت در سامانه به ثبت رسید',\r\n        'unset_record': 'متاسفانه در روند ذخیره سازی :attr مشکلی پیش آمده',\r\n        'delete_record': ':attr مورد نظر با موفقیت حذف گردید.',\r\n        'time_set': 'زمان فاکتور مورد نظر با موفقیت به ثبت رسید',\r\n        'time_set_error': 'در روند ذخیره سازی زمان مورد نظر مشکلی پیش آمد.',\r\n        'delete_record_error': 'متاسفانه در روند حذف :attr مورد نظر مشکلی رخ داده است.  لطفا مجددا تلاش کنید و یا با مدیر سامانه مشکل را اطلاع دهید.',\r\n    }\r\n};\r\n\r\n\r\nvar _trans_en = {\r\n    'message': {\r\n        'title_delete': 'آیا مطمئن به حذف رکورد مورد نظر هستید؟',\r\n        'content_delete': 'عنوان رکورد مورد نظر برای حذف :attr می باشد',\r\n        'desc_delete': 'درصورتی که رکورد مورد نظر حذف شود اطلاعات برگشت پذیر نخواهد بود.',\r\n        'set_record': 'اطلاعات :attr با موفقیت در سامانه به ثبت رسید',\r\n        'unset_record': 'Sorry! During Setting :attr has problem',\r\n        'delete_record': ':attr مورد نظر با موفقیت حذف گردید.',\r\n        'time_set': 'زمان فاکتور مورد نظر با موفقیت به ثبت رسید',\r\n        'time_set_error': 'در روند ذخیره سازی زمان مورد نظر مشکلی پیش آمد.',\r\n        'delete_record_error': 'متاسفانه در روند حذف :attr مورد نظر مشکلی رخ داده است.  لطفا مجددا تلاش کنید و یا با مدیر سامانه مشکل را اطلاع دهید.',\r\n        'not_found_state': 'صفحه درخواستی وجود ندارد',\r\n        'error_state': 'متاسفیم! برای سیستم یک خطای غیر منتظره بوجود آمده است . لطفا با مدیر سامانه این موضوع را در میان بگذارید.',\r\n        'error_public_state': 'متاسفیم! سیستم یک خطای غیر منتظره دارد.',\r\n    },\r\n    'page_title': {\r\n        'consoleprofilesettings': 'پروفایل کاربری',\r\n        'consolemanageusers': 'مدیریت کاربران',\r\n        'consolemanageroles': 'قوانین دسترسی',\r\n        'consolemanageconst': 'مدیریت ثابت ها',\r\n        'consolemanagelog': 'رویداد های سیستمی',\r\n        'consoleproductlist': 'محصولات',\r\n        'consoleproductadd': 'افزودن محصول',\r\n        'consoleflowerslist': 'گلها',\r\n        'consoleorderadd': 'افزودن سفارش مناسبتی',\r\n        'consoleorderlistlist': 'سفارش ها',\r\n        'consoleorderlistunverified': 'سفارش های تایید نشده',\r\n        'consoleorderreport': 'گزارش سفارش',\r\n        'consolecustomerlist': 'مشتریان',\r\n        'consolecustomeradd': 'افزودن مشتری',\r\n        'consolecustomergroup': 'گروه بندی مشتری',\r\n        'consolecost': 'هزینه های جاری',\r\n        'consolefloweradd': 'افزودن گل جدید',\r\n        'consoleflowerlist': 'لیست گل ها',\r\n        'consoleflower_packageadd': 'افزودن ترکیب گل جدید',\r\n        'consoleflower_packagelist': 'لیست ترکیب گل ها',\r\n        'consoleflower_packetadd': 'افزودن بسته جدید',\r\n        'consoleflower_packetlist': 'لیست بسته ها'\r\n    },\r\n    'subject': {\r\n        'page': 'Page'\r\n    },\r\n    'w': {\r\n        'yes': 'بلی',\r\n        'cancel': 'انصراف',\r\n    }\r\n};\r\n","var app = angular.module('app', [\r\n    'ngRoute',\r\n    'ngMaterial',\r\n    'ngMessages',\r\n    'ui.router',\r\n    'ckeditor',\r\n    'ui.tree',\r\n    'ngAnimate',\r\n    'ngTable',\r\n    'ngResource',\r\n    'mdColors',\r\n    'chart.js',\r\n    'ngFileUpload',\r\n    'angular-popover',\r\n    'ui.mask',\r\n    'mdPickers',\r\n    'ui.select',\r\n    'bcherny/formatAsCurrency',\r\n    'ngJalaaliFlatDatepicker',\r\n    'ngSanitize'\r\n]);\r\n\r\nfunction home($path) {\r\n    return __domain + $path;\r\n\r\n}\r\n\r\napp.config(function ($mdThemingProvider) {\r\n\r\n    var neonRedMap = $mdThemingProvider.extendPalette('cyan', {\r\n        '500': '#00BBD3',\r\n        '300': '#0097a7',\r\n        '600': '#00bcd4',\r\n        '400': '#212121',\r\n        'contrastDefaultColor': 'light'\r\n    });\r\n    // Register the new color palette map with the name <code>neonRed</code>\r\n    $mdThemingProvider.definePalette('araCyan', neonRedMap);\r\n    $mdThemingProvider.theme('default')\r\n        .primaryPalette('light-green', {'default': '700'})\r\n        .accentPalette('teal', {'default': '500', 'hue-1': '900', 'hue-2': '400', 'hue-3': '300'})\r\n        .warnPalette('red', {'default': '600'})\r\n        .backgroundPalette('grey', {'default': '50'});\r\n});\r\n\r\n\r\nChart.defaults.global.defaultFontFamily = 'yek';\r\n\r\n\r\nvar CircleChart = function () {\r\n    this.labels = [];\r\n    this.series = [];\r\n    this.data = [];\r\n    this.options = {};\r\n    this.datasetOverride = {};\r\n    this.defaultOption = function () {\r\n        this.options = {\r\n            legend: {\r\n                display: false\r\n            },\r\n            scales: {\r\n                xAxes: [\r\n                    {\r\n                        gridLines: {\r\n                            display: false\r\n                        }\r\n                    }\r\n                ],\r\n                yAxes: [\r\n                    {\r\n                        gridLines: {\r\n                            display: true\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        };\r\n    };\r\n\r\n    this.init = function () {\r\n        this.data = [];\r\n        this.series = ['Series 1'];\r\n        for (var i = 0; i < 3; i++) {\r\n            var date = new Date();\r\n            this.labels.push(date.getDate() + i);\r\n            this.data.push(getRandomInt(100, 250));\r\n        }\r\n    };\r\n    this.init();\r\n};\r\n\r\nvar LineChart = function () {\r\n    this.labels = [];\r\n    this.series = [];\r\n    this.data = [];\r\n    this.options = {};\r\n    this.datasetOverride = [];\r\n\r\n    this.defaultOption = function () {\r\n        this.options = {\r\n            legend: {\r\n                display: false\r\n            },\r\n            scales: {\r\n                xAxes: [{\r\n                    gridLines: {\r\n                        display: false\r\n                    }\r\n                }],\r\n                yAxes: [\r\n                    {\r\n                        gridLines: {\r\n                            display: true\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        };\r\n    };\r\n\r\n    this.init = function () {\r\n        this.data[0] = [];\r\n        this.data[1] = [];\r\n        this.data[2] = [];\r\n        this.series = ['Series 1', 'Series 2', 'Series 3'];\r\n        for (var i = 0; i < 10; i++) {\r\n            var date = new Date();\r\n            this.labels.push(date.getDate() + i);\r\n            this.data[0].push(getRandomInt(100, 150));\r\n            this.data[1].push(getRandomInt(100, 150));\r\n            this.data[2].push(getRandomInt(100, 150));\r\n        }\r\n    };\r\n    this.init();\r\n};\r\n\r\nfunction getRandomInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min)) + min;\r\n}\r\n","app.factory('htp', function ($http, notify) {\r\n    var _Htp = function (url, data) {\r\n        this.options = {};\r\n        this.afterSuccess = [];\r\n        var that = this;\r\n        $http.post(url, data)\r\n            .success(function (response) {\r\n                if (that.options.then) {\r\n                    that.options.then.call(this, response);\r\n                }\r\n\r\n                if (that.options.after) {\r\n                    that.options.after.call(this, response);\r\n                }\r\n                _.each(that.afterSuccess, function (item) {\r\n                    item.call(that, response);\r\n                });\r\n            })\r\n            .error(function (response, sts) {\r\n                if (that.options.after) {\r\n                    that.options.after.call(this, response, sts);\r\n                }\r\n                if (that.options.error) {\r\n                    that.options.error.call(this, response, sts);\r\n                }\r\n                switch (sts) {\r\n                    case 422:\r\n                        if (that.errorItem) {\r\n                            that.errorItem.call(this, response);\r\n                        }\r\n                        notify('error', trans('message.422'));\r\n                        break;\r\n                }\r\n            });\r\n    };\r\n\r\n\r\n    _Htp.prototype.then = function (fn) {\r\n        this.options.then = fn;\r\n        return this;\r\n    };\r\n\r\n    _Htp.prototype.after = function (fn) {\r\n        this.options.after = fn;\r\n        return this;\r\n    };\r\n\r\n    _Htp.prototype.error = function (fn) {\r\n        this.options.error = fn;\r\n        return this;\r\n    };\r\n\r\n    _Htp.prototype.errorNotice = function (fn) {\r\n        this.errorItem = fn;\r\n        return this;\r\n    };\r\n\r\n    _Htp.prototype.saveSend = function (title) {\r\n        this.afterSuccess.push(function () {\r\n            notify('info', trans('message.set_record', {attr: title}))\r\n        });\r\n        return this;\r\n    };\r\n\r\n\r\n    return function (url, data) {\r\n        return new _Htp(url, data);\r\n    };\r\n});","app.directive('useAc', function ($http) {\r\n    function link(s, elm, attrs) {\r\n        if (!s.n) {\r\n            s.n = {};\r\n        }\r\n        if (!s.o) {\r\n            s.o = {}\r\n        }\r\n        s.o.querySearch = function ($search) {\r\n\r\n            var _export = {textSearch: $search};\r\n\r\n            if (s.o.getData) {\r\n                _export.extra = s.o.getData();\r\n            }\r\n            return $http.post(home(s.link), _export).then(function (response) {\r\n                return response.data;\r\n            });\r\n        };\r\n\r\n        s.$watch('o.selectedItem', function (n) {\r\n            s.n = n;\r\n        });\r\n    }\r\n\r\n    return {\r\n        restrict: 'A',\r\n        link: link,\r\n        scope: {\r\n            n: '=ngModel',\r\n            o: '=ngOpt',\r\n            link: '=ngLink'\r\n        }\r\n    }\r\n});","app.directive('useChip', function ($http) {\r\n    function link(s, elm, attrs) {\r\n        if (!s.n) {\r\n            s.n = {};\r\n        }\r\n        if (!s.o) {\r\n            s.o = {}\r\n        }\r\n        s.o.transformChip = function (chip) {\r\n            if (angular.isObject(chip)) {\r\n                return chip;\r\n            }\r\n            return {name: chip, type: 'new'};\r\n        };\r\n        s.o.querySearch = function ($search) {\r\n            return $http.post(home(s.link), {textSearch: $search}).then(function (response) {\r\n                return response.data;\r\n            });\r\n        };\r\n    }\r\n\r\n    return {\r\n        restrict: 'A',\r\n        link: link,\r\n        scope: {\r\n            n: '=ngModel',\r\n            o: '=ngOpt',\r\n            link: '=ngLink'\r\n        }\r\n    }\r\n});","app.factory('notify', function () {\r\n    return function ($type, $text, $delay) {\r\n        $delay = $delay || 7500;\r\n        var scope = angular.element('#notify-wrapper').scope();\r\n        if (scope)\r\n            scope._notify($type, $text, $delay);\r\n    }\r\n});\r\n\r\n\r\napp.controller('NotifyCtrl', function ($scope, $timeout) {\r\n    $scope.admin_notify = [];\r\n    $scope.times = [];\r\n    $scope._notify = function ($type, $text, $delay) {\r\n        $scope.admin_notify.push({type: $type, text: $text, delay: $delay});\r\n        $scope.times.push($timeout(function () {\r\n            $scope._destroy(0);\r\n        }, $delay))\r\n    };\r\n    $scope._destroy = function ($index) {\r\n        $scope.admin_notify = _.without($scope.admin_notify, $scope.admin_notify[$index]);\r\n        $scope.times = _.without($scope.times, $scope.times[$index]);\r\n    };\r\n});","app.directive('useFileUpload', function (htp, Upload) {\r\n    function link(s, elm, attrs) {\r\n        if (!s.n) {\r\n            s.n = {};\r\n        }\r\n        s.n = new Fls('file', attrs['fileUploadLink']);\r\n    }\r\n\r\n    var Fls = function ($name, $url) {\r\n        this.errorUploading = undefined;\r\n        this.file = undefined;\r\n        this.success = undefined;\r\n        this.readyUpload = undefined;\r\n        this.progress = undefined;\r\n        this.name = $name;\r\n        this.has = undefined;\r\n        this.finish = true;\r\n        this.url = undefined;\r\n        this.send_url = $url;\r\n\r\n        this.clear = function () {\r\n            this.errorUploading = this.readyUpload = this.file = this.success = this.progress = undefined;\r\n        };\r\n\r\n        this.clearError = function () {\r\n            this.errorUploading = undefined;\r\n        };\r\n\r\n        this.__submit = function () {\r\n            _Upload(this);\r\n        };\r\n\r\n        this.init = function () {\r\n            this.has = true;\r\n            this.finish = false;\r\n        };\r\n    };\r\n\r\n\r\n    var _Upload = function (fls) {\r\n        fls.clearError();\r\n        fls.uploading = true;\r\n        Upload.upload({\r\n            url: home(fls.send_url),\r\n            data: {file: fls.file, type: fls.name}\r\n        }).then(function (resp) {\r\n            fls.uploading = false;\r\n            fls.clear();\r\n            fls.success = true;\r\n            fls.finish = true;\r\n            console.log('resp' , resp);\r\n            fls.url = resp.data.url;\r\n        }, function (resp) {\r\n            fls.errorUploading = true;\r\n            fls.file = undefined;\r\n            fls.uploading = false;\r\n            fls.progress = undefined;\r\n        }, function (evt) {\r\n            fls.progress = parseInt(100.0 * evt.loaded / evt.total);\r\n        });\r\n    };\r\n    return {\r\n        restrict: 'A',\r\n        link: link,\r\n        scope: {\r\n            n: '=ngModel'\r\n        }\r\n    }\r\n});\r\n\r\n\r\n","app.factory('loader', function () {\r\n    return function ($sts) {\r\n        var scope = angular.element('#main-progress-bar').scope();\r\n        if($sts) {\r\n            scope._on();\r\n        }\r\n        else{\r\n            scope._off();\r\n        }\r\n    }\r\n});\r\n\r\napp.controller('PreloaderCtrl', function ($scope, $timeout) {\r\n    $scope._off = function () {\r\n        $scope._loader = false;\r\n    };\r\n    $scope._on = function () {\r\n        $scope._loader = true;\r\n    }\r\n});","app.factory('httpRequestInterceptor', function ($q, $location, notify) {\r\n\r\n    return {\r\n        'responseError': function (rejection) {\r\n            // do something on error\r\n            switch (rejection.status) {\r\n                case 404:\r\n                    // notify('warning', 'صفحه درخواستی وجود ندارد');\r\n                    if (rejection.config.method == 'GET')\r\n                    // window.history.back();\r\n                        break;\r\n                case 401:\r\n                    // notify('red', 'شما سطح دسترسی به این بخش از سامانه ندارید');\r\n                    // if (rejection.config.method == 'GET')\r\n                    // window.history.back();\r\n                    \r\n                    break;\r\n                case 423:\r\n                    notify('red', 'آخرین نشست شما باطل شده. لطفا مجددا وارد شوید.');\r\n                    // window.location.href = home('auth/login');\r\n                    break;\r\n                case  406:\r\n                    break;\r\n\r\n            }\r\n            return $q.reject(rejection);\r\n        }\r\n    };\r\n});\r\n\r\napp.config(function ($httpProvider, $stateProvider, $urlRouterProvider) {\r\n    $httpProvider.interceptors.push('httpRequestInterceptor');\r\n    var build_url = function ($url) {\r\n        if ($url.indexOf(':') != -1) {\r\n            return function ($param) {\r\n                return home($url);\r\n            }\r\n        } else {\r\n            return home($url);\r\n        }\r\n    };\r\n    $$routes = angular.fromJson($$routes);\r\n\r\n\r\n    var $redirect = {\r\n        '/': '@/dashboard',\r\n        'console/order/list': '@/order/list'\r\n    };\r\n\r\n    _.map($redirect, function (_to, _in) {\r\n        if (/@/.test(_to)) {\r\n            _to = _to.replace(new RegExp('@'), _in);\r\n        }\r\n        $urlRouterProvider.when('/' + _in, '/' + _to);\r\n    });\r\n\r\n    if ($$routes) {\r\n        _.map($$routes, function (item) {\r\n            var _item = {};\r\n            _item.templateUrl = function (url) {\r\n                if (_.isObject(url) && _.size(url)) {\r\n                    return home(item.url + '/' + url.id);\r\n                } else {\r\n                    return home(item.url);\r\n                }\r\n            };\r\n            if (item.ctrl != 'AdminCtrl') {\r\n                _item.controller = item.ctrl;\r\n                _item.controller = item.ctrl;\r\n            } else {\r\n                _item.controller = 'AdminCtrl';\r\n            }\r\n\r\n            _item.views = {\r\n                \"viewMaster\": {\r\n                    templateUrl: _item.templateUrl,\r\n                    controller: _item.controller\r\n                },\r\n                \"viewTab\": {\r\n                    templateUrl: _item.templateUrl,\r\n                    controller: _item.controller\r\n                }\r\n            };\r\n\r\n            if (item.sref) {\r\n                _item.state = item.sref;\r\n            } else {\r\n                _item.state = item.url.replace(new RegExp('/', 'g'), '.');\r\n                _item.state = item.url;\r\n            }\r\n            _item.url = '/' + item.ui_url;\r\n            $stateProvider.state(_item.state, _item);\r\n        });\r\n    }\r\n});\r\n ","app.run(function ($window, $rootScope, htp) {\r\n    $rootScope.online = navigator.onLine;\r\n    $window.addEventListener(\"offline\", function () {\r\n        $rootScope.$apply(function () {\r\n            $rootScope.online = false;\r\n        });\r\n    }, false);\r\n\r\n    $window.addEventListener(\"online\", function () {\r\n        $rootScope.$apply(function () {\r\n            $rootScope.online = true;\r\n        });\r\n    }, false);\r\n});\r\n\r\napp.controller('AdminCtrl', function ($scope, $window, htp, $interval, $rootScope, $timeout, $mdSidenav, $mdUtil, $log, NgTableParams, $resource, $http, $state, $stateParams, notify) {\r\n    $scope.w_h = $window.innerHeight;\r\n    var _this = $scope;\r\n    $scope.show_leftbar = false;\r\n    $scope.home = home;\r\n    if ($scope.$parent.$id == 1) {\r\n\r\n        $interval(function () {\r\n            htp(home('check-auth')).then(function (response) {\r\n                if (response != true) {\r\n                    $window.location.reload();\r\n                }\r\n            });\r\n        }, 10000);\r\n\r\n        $rootScope.$on(\"$stateChangeStart\", function (event, next, current) {\r\n            $scope.preloder_page = true;\r\n            $mdSidenav('menu').close();\r\n        });\r\n        $rootScope.$on('$stateChangeSuccess',\r\n            function (event, toState, toParams, fromState, fromParams) {\r\n                $scope.preloder_page = false;\r\n                $scope.toolbarTitlePage = [];\r\n                $scope.toolbarTitlePage.push(trans('page_title.' + toState.state.split('.').join('')));\r\n                if (!_this.float_tab_active) {\r\n                    _this.admin_tab = [];\r\n                } else {\r\n                    _this.float_tab_active = false;\r\n                }\r\n            });\r\n\r\n        $rootScope.$on('$stateChangeError', function (event, toState, toParams, fromState, fromParams, error) {\r\n            $scope.preloder_page = false;\r\n            switch (error.status) {\r\n                case 404:\r\n                    notify('red', trans('message.not_found_state'));\r\n                    break;\r\n                case 500:\r\n                    notify('red', trans('message.error_state'));\r\n                    break;\r\n                default:\r\n                    notify('red', trans('message.error_public_state'));\r\n                    break;\r\n            }\r\n        });\r\n\r\n        $rootScope.$watch('online', function (n) {\r\n            if (n == false) {\r\n                notify('error', 'اینترنت شما متاسفانه قطع شده است. در صورت قطع اینترنت سامانه کارایی نخواهد داشت.');\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    $scope.toggleLeft = buildDelayedToggler('left');\r\n    $scope.toggleRight = buildToggler('right');\r\n    $scope.isOpenRight = function () {\r\n        return $mdSidenav('right').isOpen();\r\n    };\r\n    function buildDelayedToggler(navID) {\r\n        return debounce(function () {\r\n            $mdSidenav(navID)\r\n                .toggle()\r\n                .then(function () {\r\n                    $log.debug(\"toggle \" + navID + \" is done\");\r\n                });\r\n        }, 200);\r\n    }\r\n\r\n    function buildToggler(navID) {\r\n        return function () {\r\n            $mdSidenav(navID)\r\n                .toggle()\r\n                .then(function () {\r\n                    $log.debug(\"toggle \" + navID + \" is done\");\r\n                });\r\n        }\r\n    }\r\n\r\n    function debounce(func, wait, context) {\r\n        var timer;\r\n        return function debounced() {\r\n            var context = $scope,\r\n                args = Array.prototype.slice.call(arguments);\r\n            $timeout.cancel(timer);\r\n            timer = $timeout(function () {\r\n                timer = undefined;\r\n                func.apply(context, args);\r\n            }, wait || 10);\r\n        };\r\n    }\r\n\r\n    $scope.demo = {};\r\n    $scope.toggleMenu = function () {\r\n        $mdSidenav('menu').open()\r\n            .then(function () {\r\n            });\r\n    };\r\n\r\n\r\n    _this.chartModel = new LineChart();\r\n    _this.circleChart = new CircleChart();\r\n    _this.compChart = new LineChart();\r\n    _this.compChart.labels = ['شنبه', 'یکشنبه', 'دوشنبه', 'سه شنبه', 'چهارشنبه', 'پنج شنبه', 'جمعه'];\r\n    _this.compChart.data = [\r\n        [65, -59, 80, 81, -56, 55, -40],\r\n        [28, 48, -40, 19, 86, 27, 90]\r\n    ];\r\n    _this.compChart.defaultOption();\r\n    _this.compChart.datasetOverride = [\r\n        {\r\n\r\n            label: \"Bar\",\r\n            borderWidth: 1,\r\n            type: 'line'\r\n        },\r\n        {\r\n            label: \"Line chart\",\r\n            hoverBackgroundColor: \"rgba(255,99,132,0.4)\",\r\n            hoverBorderColor: \"rgba(255,99,132,1)\",\r\n            type: 'bar'\r\n        }\r\n    ];\r\n    _this.tblRegister = {};\r\n\r\n    _this.notify_info = function () {\r\n        notify('info', 'یک پیغام آزمایشی');\r\n    };\r\n    _this.notify_error = function () {\r\n        notify('error', 'یک پیغام آزمایشی');\r\n    };\r\n});\r\n\r\n\r\napp.controller('MenuCtrl', function ($scope, $timeout, $mdSidenav, $log) {\r\n\r\n    $scope.last_menu = undefined;\r\n    $scope.show_menu = true;\r\n\r\n    $scope.toggle = function ($item) {\r\n        $scope[$item] = !$scope[$item];\r\n    };\r\n\r\n    $scope.deactive_menu = function ($item) {\r\n        //$scope.active_menu = false;\r\n    };\r\n    $scope.set_active_menu = function ($item, $event) {\r\n        var elm = $($event.currentTarget).siblings('.menu-item-wrapper-inner');\r\n        if ($scope.last_menu) {\r\n            $scope.last_menu.height(0);\r\n        }\r\n        if ($scope.active_menu == $item) {\r\n            $scope.active_menu = false;\r\n            return;\r\n        }\r\n        $scope.last_menu = elm;\r\n        var _h = elm.children().map(function (i) {\r\n            return $(this).height();\r\n        });\r\n        var __h = 0;\r\n        _h.each(function (i) {\r\n            __h += _h[i];\r\n        });\r\n        elm.height(__h);\r\n\r\n        $scope.active_menu = $item;\r\n    };\r\n});\r\n\r\napp.controller('RightCtrl', function ($scope, $timeout, $mdSidenav, $log) {\r\n    $scope.close = function () {\r\n        $mdSidenav('right').close()\r\n            .then(function () {\r\n                $log.debug(\"close RIGHT is done\");\r\n            });\r\n    };\r\n\r\n    var _this = $scope;\r\n    _this.clickList = function () {\r\n\r\n    };\r\n});\r\n\r\napp.controller('SubmitController', function ($scope, $http, notify) {\r\n    var _this = $scope;\r\n    _this.loading = function (sts) {\r\n        _this._loading = sts;\r\n        _this.Form.$setValidity('loading', (sts == false));\r\n    };\r\n    _this.clear = function () {\r\n        _this.data = {};\r\n        _this.Form.$setPristine();\r\n    };\r\n    _this.clearError = function () {\r\n        _this.errorItem = {};\r\n    };\r\n    _this.submit = function () {\r\n        _this.loading(true);\r\n        _this.clearError();\r\n        $http.post(home(_this.submiterUrl), _this.export())\r\n            .success(function (response) {\r\n                _this.clearError();\r\n                _this.loading(false);\r\n                _this.clear();\r\n                notify('info', trans('message.set_record', {attr: _this.submiterName}));\r\n                if (_this.afterSuccess) {\r\n                    _this.afterSuccess.call(this, response);\r\n                }\r\n            })\r\n            .error(function (response, sts) {\r\n                _this.loading(false);\r\n                notify('error', trans('message.unset_record', {attr: _this.submiterName}));\r\n                if (sts == 422) {\r\n                    _this.errorItem = response;\r\n                }\r\n            });\r\n    };\r\n\r\n    _this.export = function () {\r\n        return _this.data;\r\n    }\r\n});\r\n\r\n\r\napp.controller('PageListCtrl', function ($scope) {\r\n    var _this = $scope;\r\n    _this.tbl = {};\r\n});\r\n\r\napp.controller('MenusCtrl', function ($scope, htp) {\r\n    var _this = $scope;\r\n    _this.$watch('menu', function (n) {\r\n        _this.serv();\r\n    });\r\n\r\n    _this.data = {};\r\n    _this.list = [];\r\n    _this.serv = function () {\r\n        _this.list = [];\r\n        if (_this.menu) {\r\n            htp(home('console/node/get-menu-item'), {id: _this.menu}).then(function (response) {\r\n                _.each(response, function (item) {\r\n                    item['items'] = [];\r\n                    if (item['parent']) {\r\n                        _.findWhere(_this.list, {id: item['parent']})['items'].push(item);\r\n                    } else {\r\n                        _this.list.push(item);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    };\r\n\r\n    _this.submit = function () {\r\n        htp(home('console/node/save-menu'), {id: _this.menu, items: _this.list}).saveSend(trans('subject.menu'));\r\n    };\r\n\r\n\r\n    _this.addMenu = function () {\r\n        _this.list.push({\r\n            title: _this.data.title,\r\n            url: _this.data.url,\r\n            items: []\r\n        });\r\n        _this.data = {};\r\n        // _this.add.$setPristine();\r\n    };\r\n\r\n    _this.remove = function (scope) {\r\n        scope.remove();\r\n    };\r\n    _this.toggle = function (scope) {\r\n        scope.toggle();\r\n\r\n    };\r\n});\r\n\r\napp.controller('AddPageCtrl', function ($scope, htp, $controller) {\r\n    $controller('SubmitController', {$scope: $scope});\r\n    var _this = $scope;\r\n    _this.submiterUrl = 'console/node/add-page';\r\n    _this.submiterName = trans('subject.page');\r\n\r\n\r\n    if (_this.edit_mode) {\r\n        _this.data = _this.dt;\r\n    }\r\n});\r\n\r\n\r\napp.controller('FeeCtrl', function ($scope, htp, $controller, notify) {\r\n    $controller('SubmitController', {$scope: $scope});\r\n    var _this = $scope;\r\n    _this.submiterUrl = 'console/fee/set-fee';\r\n    _this.submiterName = trans('subject.page');\r\n    _this.data = {};\r\n    htp(home('console/fee/get-date')).then(function (response) {\r\n        _this.data.at = response;\r\n    });\r\n\r\n    htp(home('get-currency')).then(function (response) {\r\n        _this.currency = response;\r\n    });\r\n\r\n\r\n    _this.$watch('data.currency', function (n) {\r\n        if (n != undefined) {\r\n            _this.illegal_change();\r\n        }\r\n    });\r\n\r\n\r\n    _this.$watch('data.to', function (n) {\r\n        if (n != undefined) {\r\n            _this.illegal_change();\r\n        }\r\n    });\r\n\r\n    _this.illegal_change = function () {\r\n        _this.Form.$setValidity('illegal', !(_this.data.currency == _this.data.to));\r\n        if (_this.data.currency == _this.data.to) {\r\n            notify('error', trans('message.illegal_change'));\r\n        }\r\n    };\r\n\r\n    _this.tbl = {};\r\n});\r\n\r\napp.controller('FeeListCtrl', function ($scope, htp, notify) {\r\n    var _this = $scope;\r\n    _this.tbl = {};\r\n    _this.saveRow = function (row) {\r\n        htp(home('console/fee/save-row'), row).then(function (n) {\r\n            notify('info', trans('message.set_record'));\r\n            row.extraRow = false;\r\n        });\r\n    }\r\n});\r\n\r\napp.controller('AddOrderCtrl', function ($scope, htp, $controller, Upload) {\r\n    $controller('SubmitController', {$scope: $scope});\r\n    var _this = $scope;\r\n    _this.submiterUrl = 'console/order/set-order';\r\n    _this.submiterName = trans('subject.order');\r\n\r\n    _this.data = {};\r\n    _this.mdAcTo = {};\r\n    _this.mdAcIban = {};\r\n    _this.mdAcCid = {};\r\n    htp(home('get-currency')).then(function (respoonse) {\r\n        _this.items = respoonse;\r\n    });\r\n\r\n\r\n    _this.$watch('data.iban_type', function (n) {\r\n        _this.ibanCidInfo = undefined;\r\n        if (n == 'cid') {\r\n            _this.data.iban = undefined;\r\n            _this.mdAcIban.searchText = _this.mdAcIban.selectedItem = undefined;\r\n        } else if (n == 'iban') {\r\n            _this.data.cid = undefined;\r\n            _this.mdAcCid.searchText = _this.mdAcCid.selectedItem = undefined;\r\n        }\r\n    });\r\n\r\n\r\n    _this.$watch('data.cid', function (n) {\r\n        if (n && n.id) {\r\n            _this.hasIban = true;\r\n            htp(home('console/order/get-iban-from-cid'), {cid: n.id}).then(function (response) {\r\n                _this.ibanCidInfo = response;\r\n                console.log('ibanCidInfo', _this.ibanCidInfo);\r\n            });\r\n        } else {\r\n            _this.hasIban = undefined;\r\n        }\r\n    });\r\n\r\n    _this.$watch('data.iban', function (n) {\r\n        if (n && n.id) {\r\n            _this.hasIban = true;\r\n\r\n        } else {\r\n            _this.hasIban = undefined;\r\n        }\r\n    });\r\n\r\n    _this.mdAcTo.getData = function () {\r\n        return {from: _this.data.from.id};\r\n    };\r\n\r\n    _this.$watch('data.from', function (n) {\r\n        if (n && n.id) {\r\n            _this.data.to = {};\r\n            _this.mdAcTo.searchText = undefined;\r\n            _this.change();\r\n        }\r\n    });\r\n    _this.$watch('data.to', function (n) {\r\n        if (n && n.id) {\r\n            _this.change();\r\n        }\r\n    });\r\n\r\n    _this.change = function () {\r\n        if (_this.data && _this.data.from && _this.data.to && _this.data.from.id && _this.data.to.id) {\r\n            htp(home('console/order/get-fee'), {\r\n                from: _this.data.from.id,\r\n                to: _this.data.to.id\r\n            }).then(function (response) {\r\n                if (response) {\r\n                    _this.dt = response;\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    _this.$watch('dt', function (n) {\r\n        if (n) {\r\n            _this.calc();\r\n        }\r\n    });\r\n\r\n    _this.$watch('data.from_value', function (n) {\r\n        if (n) {\r\n            _this.calc();\r\n        }\r\n    });\r\n\r\n    _this.data.fls = {};\r\n    _this.uploadFiles = function () {\r\n        htp(home('console/order/upload-file'), _this.data.files).then(function (response) {\r\n            console.log('response', response);\r\n        });\r\n        var fls = {};\r\n        _this.data.fls = fls;\r\n        fls.uploading = true;\r\n        Upload.upload({\r\n            url: home('console/order/upload-file'),\r\n            data: {files: _this.data.files}\r\n        }).then(function (resp) {\r\n            fls.uploading = false;\r\n            // fls.clear();\r\n            fls.success = true;\r\n            fls.finish = true;\r\n            fls.url = resp.data.result;\r\n            fls.progress = undefined;\r\n        }, function (resp) {\r\n            fls.errorUploading = true;\r\n            fls.file = undefined;\r\n            fls.uploading = false;\r\n            fls.progress = undefined;\r\n        }, function (evt) {\r\n            fls.progress = parseInt(100.0 * evt.loaded / evt.total);\r\n        });\r\n        console.log('_this.data.files', _this.data.files);\r\n    };\r\n\r\n    _this.calc = function () {\r\n        if (_this.data && _this.data.from_value && _this.dt && _this.dt.percent) {\r\n            _this.exchange = _this.dt.percent * _this.data.from_value;\r\n        } else {\r\n            _this.exchange = undefined;\r\n        }\r\n        return _this.exchange;\r\n    };\r\n    _this.export = function () {\r\n        return _.extend(_this.data, _this.dt);\r\n    };\r\n});\r\n\r\n\r\napp.controller('OrderListCtrl', function ($scope, htp) {\r\n    var _this = $scope;\r\n    console.log('_this', _this);\r\n    _this.tbl = {};\r\n    _this.proceed = function (row) {\r\n        row.preloader = true;\r\n        htp(home('console/order/proceed-order'), row).then(function (response) {\r\n            row.preloader = false;\r\n            row.extraRow = false;\r\n        });\r\n    };\r\n});\r\n\r\n\r\napp.controller('UserCtrl', function ($scope, htp, $controller, Upload) {\r\n    $controller('SubmitController', {$scope: $scope});\r\n    var _this = $scope;\r\n    _this.submiterUrl = 'console/manage/user-add';\r\n    _this.submiterName = trans('subject.user_add');\r\n    _this.tbl = {};\r\n\r\n\r\n    _this.change = function (row) {\r\n        htp(home('console/manage/active-user'), {id: row.id, active: row.active});\r\n    };\r\n\r\n    if (!_this.data) {\r\n        _this.data = {};\r\n    } else {\r\n        console.log('_this.data', _this.data);\r\n    }\r\n\r\n    if (_this.edit_mode) {\r\n        _this.data = _.extend(_this.data, _this.dt);\r\n    }\r\n    _this.confirm_pass = function () {\r\n        if (_this.Form) {\r\n            _this.Form.confirm.$setValidity('confirm', _this.data.password == _this.data.confirm);\r\n        }\r\n    };\r\n\r\n    _this.$watch('data.password', function (n) {\r\n        _this.confirm_pass();\r\n    });\r\n\r\n    _this.$watch('data.confirm', function (n) {\r\n        _this.confirm_pass();\r\n    });\r\n\r\n    var Fls = function ($name) {\r\n        this.errorUploading = undefined;\r\n        this.file = undefined;\r\n        this.success = undefined;\r\n        this.readyUpload = undefined;\r\n        this.progress = undefined;\r\n        this.name = $name;\r\n        this.has = undefined;\r\n        this.finish = true;\r\n        this.url = undefined;\r\n        this.clear = function () {\r\n            this.errorUploading = this.readyUpload = this.file = this.success = this.progress = undefined;\r\n        };\r\n\r\n        this.clearError = function () {\r\n            this.errorUploading = undefined;\r\n        };\r\n\r\n        this.__submit = function () {\r\n            _this._upload(this);\r\n        };\r\n\r\n        this.init = function () {\r\n            this.has = true;\r\n            this.finish = false;\r\n        };\r\n    };\r\n    htp(home('console/profile/get-user-data')).then(function (response) {\r\n        // _this.data = response;\r\n        _this.data.personal = new Fls('personal');\r\n        _this.data.personal.url = '';\r\n        _this.data.personal.url = home(_this.data.personal_picture);\r\n    });\r\n\r\n\r\n    _this._upload = function (fls) {\r\n        fls.clearError();\r\n        fls.uploading = true;\r\n        Upload.upload({\r\n            url: home('console/profile/upload-profile-image'),\r\n            data: {file: fls.file, type: fls.name, uid: _this.data.id}\r\n        }).then(function (resp) {\r\n            fls.uploading = false;\r\n            fls.clear();\r\n            fls.success = true;\r\n            fls.finish = true;\r\n            fls.url = resp.data.url;\r\n            var d = new Date();\r\n            _this.data.personal.url = resp.data.url + '?ver=' + d.getTime();\r\n        }, function (resp) {\r\n            fls.errorUploading = true;\r\n            fls.file = undefined;\r\n            fls.uploading = false;\r\n            fls.progress = undefined;\r\n        }, function (evt) {\r\n            fls.progress = parseInt(100.0 * evt.loaded / evt.total);\r\n        });\r\n    };\r\n\r\n});\r\n\r\n\r\napp.controller('DeleteCtrl', function ($scope, htp, $mdDialog, notify) {\r\n    var _this = $scope;\r\n    _this.destroy = function (id, where, ngTable) {\r\n        htp(home('console/destroy'), {id: id, where: where})\r\n            .then(function (response) {\r\n                notify('warning', 'رکورد مورد نظر با موفقیت حذف شد');\r\n                if (ngTable && ngTable != 'null') {\r\n                    _this.$parent[ngTable].tableParams.reload();\r\n                }\r\n            });\r\n    };\r\n\r\n    _this.showConfirm = function (ev, id, where, title, ngTable) {\r\n        var desc = trans('message.desc_delete');\r\n        if (title) {\r\n            desc = trans('message.content_delete', {title: title});\r\n        }\r\n        var confirm = $mdDialog.confirm()\r\n            .title(trans('message.title_delete'))\r\n            .textContent(desc)\r\n            .ariaLabel('حدف رکورد')\r\n            .targetEvent(ev)\r\n            .ok('بلی')\r\n            .cancel('خیر');\r\n        $mdDialog.show(confirm).then(function () {\r\n            _this.destroy(id, where, ngTable);\r\n        }, function () {\r\n\r\n        });\r\n    };\r\n});\r\n\r\n\r\napp.controller('EditCtrl', function ($scope, htp, $mdDialog, notify, $mdMedia) {\r\n    var _this = $scope;\r\n    _this.showEditDialog = function (ev, template_url, row, ctrl, where, id, ngTable) {\r\n        var dialog = $mdDialog.show({\r\n                controller: function ($scope, $controller, dt, $mdDialog, where, id, table) {\r\n                    $scope.dt = dt;\r\n                    $scope.edit_mode = true;\r\n                    $scope.hide = function () {\r\n                        $mdDialog.hide();\r\n                    };\r\n                    $scope.cancel = function () {\r\n                        $mdDialog.cancel();\r\n                    };\r\n                    $scope.editBtnDialog = function () {\r\n                        $scope.preloader = true;\r\n                        htp(home('console/edit-dialog'), {\r\n                            where: where,\r\n                            id: id,\r\n                            data: $scope.data\r\n                        }).then(function (response) {\r\n                            $scope.preloader = false;\r\n                            $mdDialog.hide();\r\n                            if (table && table != 'null') {\r\n                                _this.$parent[table].reload();\r\n                            }\r\n                        });\r\n                    };\r\n                    $controller(ctrl, {$scope: $scope});\r\n                },\r\n                templateUrl: home(template_url),\r\n                parent: angular.element(document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    dt: row,\r\n                    where: where,\r\n                    table: ngTable,\r\n                    id: id\r\n                },\r\n                fullscreen: true // Only for -xs, -sm breakpoints.\r\n            })\r\n            .then(function (answer) {\r\n\r\n            });\r\n    };\r\n});\r\n\r\n\r\napp.directive('uiSelectAsyncUrl', function ($http) {\r\n    return {\r\n        restrict: 'A',\r\n        link: function (scope, elm, attr) {\r\n            scope.uiSelectSyncMethod = function (search) {\r\n                var dt = {text: search};\r\n                if (attr.uiSelectExtraData) {\r\n                    dt.extra = scope[attr.uiSelectExtraData].call(this);\r\n                }\r\n                return $http.post(home(attr.uiSelectAsyncUrl), dt).then(function (response) {\r\n                    scope[attr.uiSelectAsyncItems] = response.data;\r\n                });\r\n            };\r\n        }\r\n    }\r\n});\r\n\r\napp.filter('iif', function () {\r\n    return function(input, trueValue, falseValue) {\r\n        return input ? trueValue : falseValue;\r\n    };\r\n});","app.controller('RegisterCtrl', function ($scope, $http) {\r\n    $scope.data = {};\r\n    $scope.mode = 0;\r\n    $scope.form_title = ['فرم ثبت نام سریع رویش وب', 'ثبت نام شما با موفقیت انجام شد', 'در فرآیند ثبت نام شما خطایی رخ داده است'];\r\n    $scope.valid_pass = function () {\r\n        if ($scope.register_form) {\r\n            $scope.register_form.$setValidity('pass', ($scope.data.password == $scope.data.password_confirmation));\r\n        }\r\n    };\r\n    $scope.$watch('data.password', function () {\r\n        $scope.valid_pass()\r\n    });\r\n    $scope.$watch('data.password_confirmation', function () {\r\n        $scope.valid_pass()\r\n    });\r\n\r\n    $scope.submit = function ($event) {\r\n        $event.preventDefault();\r\n        $scope.loading(true);\r\n        $http.post(home('auth/register'), $scope.data)\r\n            .success(function (response) {\r\n                $scope.loading(false);\r\n                $scope.mode = 1;\r\n                $scope.result = response;\r\n            })\r\n\r\n            \r\n            .error(function (response, status) {\r\n                $scope.loading(false);\r\n                if (status == 422) {\r\n                    $scope.server_error = response;\r\n                }\r\n                else if (status == 500 || 400) {\r\n                    $scope.mode = 2;\r\n                }\r\n            });\r\n    };\r\n    $scope.loading = function ($mode) {\r\n        $scope.preloader = $mode;\r\n    }\r\n});\r\n\r\n\r\napp.controller('LoginCtrl', function ($scope, $http) {\r\n    $scope.data = {};\r\n\r\n    $scope.submit = function ($event) {\r\n        $scope.loading(true);\r\n        $scope.server_error = $scope.unauthorized = $scope.not_acceptable = undefined;\r\n        $event.preventDefault();\r\n        $http.post(home('auth/login'), $scope.data)\r\n            .success(function (response) {\r\n                if (response['result'] == true) {\r\n                    window.location.href = response['redirectPath'];\r\n                }\r\n            })\r\n            .error(function (response, status) {\r\n                $scope.loading(false);\r\n                if (status == 422) {\r\n                    $scope.server_error = response;\r\n                } else if (status == 401) {\r\n                    $scope.unauthorized = true;\r\n                } else if (status == 406) {\r\n                    $scope.not_acceptable = true;\r\n                }\r\n            });\r\n    };\r\n\r\n    $scope.loading = function ($mode) {\r\n        $scope.preloader = $mode;\r\n    }\r\n});\r\n","app.directive('useNgTable', function (NgTableParams, $http, $window) {\r\n    function link(s, elm, attrs) {\r\n        if (!s.n) {\r\n            s.n = {};\r\n        }\r\n\r\n        if (!(s.n.filter)) {\r\n            s.n.filter = {};\r\n        }\r\n\r\n        if (!s.n.cols) {\r\n            s.n.cols = {};\r\n        }\r\n\r\n        s.n.filter.$items = [];\r\n        s.n.filter.adder = {};\r\n        s.n.btnFilter = [];\r\n\r\n\r\n        s.n.filter.showFS = function () {\r\n            s.n.filter.showFilterSelect = true;\r\n        };\r\n\r\n        s.n.isActiveBtnFilter = function (id) {\r\n            return _.indexOf(s.n.btnFilter, id) != -1;\r\n        };\r\n\r\n        s.n.toggleBtnFilter = function (id) {\r\n            if (s.n.isActiveBtnFilter(id)) {\r\n                s.n.btnFilter = _.without(s.n.btnFilter, id);\r\n            } else {\r\n                s.n.btnFilter.push(id);\r\n            }\r\n            s.n.serv();\r\n        };\r\n\r\n        s.n.filter.hideFS = function () {\r\n            s.n.filter.showFilterSelect = false;\r\n        };\r\n\r\n        s.n.filter.changeCritical = function (item) {\r\n            switch (item.cr) {\r\n                case 'or':\r\n                    item.cr = 'and';\r\n                    break;\r\n                case 'and':\r\n                    item.cr = 'not';\r\n                    break;\r\n                case 'not':\r\n                    item.cr = 'or';\r\n                    break;\r\n            }\r\n        };\r\n\r\n        s.n.filter.cr = {\r\n            'or': {title: 'یا', icon: 'device_hub'},\r\n            'and': {title: 'و', icon: 'all_inclusive'},\r\n            'not': {title: 'نباشد', icon: 'not_interested'},\r\n        };\r\n\r\n\r\n        s.n.offProgress = function () {\r\n            s.n.progress = false;\r\n        };\r\n\r\n        s.n.onProgress = function () {\r\n            s.n.progress = true;\r\n        };\r\n\r\n        var _post = function (params) {\r\n            s.n.onProgress();\r\n            return $http.post(home(s.n.ngtRoute), s.n.servData({\r\n                page: params.page(),\r\n                count: params.count(),\r\n                sorting: params.sorting()\r\n            })).error(function () {\r\n                s.n.offProgress();\r\n            }).then(function (response) {\r\n                s.n.offProgress();\r\n                if (response.status == 200) {\r\n                    params.total(response.data.total);\r\n                    return response.data.rows;\r\n                }\r\n            });\r\n        };\r\n\r\n        s.n.filter.addFilter = function () {\r\n            var _t = _.findWhere(s.n.filter.$data, {value: s.n.filter.mdSelect});\r\n\r\n            s.n.filter.$items.push({\r\n                title: _t.title,\r\n                value: _t.value,\r\n                type: _t.type,\r\n                select: _t.select,\r\n                cr: 'and'\r\n            });\r\n\r\n            s.n.filter.mdSelect = undefined;\r\n            s.n.filter.showFilterSelect = false;\r\n        };\r\n\r\n        s.n.filter.when = function (item) {\r\n            item.when++;\r\n            if (item.when == 4) {\r\n                item.when = 1;\r\n            }\r\n        };\r\n        s.n.filter.removeItem = function (item) {\r\n            s.n.filter.$items = _.without(s.n.filter.$items, _.findWhere(s.n.filter.$items, {value: item.value}));\r\n        };\r\n        s.n.filter.adder.isOpen = false;\r\n\r\n        s.n.tableParams = new NgTableParams({\r\n            count: 5\r\n        }, {\r\n            counts: [5, 10, 20],\r\n            paginationMaxBlocks: 10,\r\n            paginationMinBlocks: 2,\r\n            getData: _post\r\n        });\r\n\r\n        s.n.serv = function () {\r\n            s.n.tableParams.reload();\r\n        };\r\n\r\n        s.n.servData = function (params) {\r\n            params = params || {};\r\n            if (s.n.postData) {\r\n                params = _.extend(params, s.n.postData());\r\n            }\r\n            if (s.n.btnFilter) {\r\n                params = _.extend(params, {btnFilter: s.n.btnFilter});\r\n            }\r\n            return _.extend(params, {\r\n                cols: s.n.getCols(),\r\n                filter: s.n.filter.$items,\r\n                ngtRoute: s.n.ngtRoute\r\n            });\r\n        };\r\n\r\n        s.n.getCols = function () {\r\n            var tmp = [];\r\n            _.each(s.n.cols, function (item, key) {\r\n                if (_.isBoolean(item)) {\r\n                    if (item)\r\n                        tmp.push(key);\r\n                } else {\r\n                    for (var i in item) {\r\n                        if (item[i]) {\r\n                            tmp.push(key + '.' + i);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            return tmp;\r\n        };\r\n        s.n.exportExcel = function () {\r\n            var params = s.n.tableParams;\r\n            var _export = s.n.servData({\r\n                page: params.page(),\r\n                count: params.count(),\r\n                sorting: params.sorting(),\r\n                excelExport: true\r\n            });\r\n            $http.post(home(_export.ngtRoute), _export).success(function (response) {\r\n                if (response && response.file) {\r\n                    window.location = home('console/excel-file?url=' + response.file);\r\n                }\r\n            });\r\n        };\r\n\r\n\r\n        s.n.print = function () {\r\n            var params = s.n.tableParams;\r\n            var _export = s.n.servData({\r\n                page: params.page(),\r\n                count: params.count(),\r\n                sorting: params.sorting(),\r\n                exportPrint: true\r\n            });\r\n            console.log('100', 100);\r\n            var w = $window.open(\"\", '_blank');\r\n            $http.post(home(_export.ngtRoute), _export).success(function (response) {\r\n                console.log('window', window);\r\n                w.location.href = home('console/print-table');\r\n            });\r\n        };\r\n\r\n        s.n.exportPDF = function () {\r\n            var params = s.n.tableParams;\r\n            var _export = s.n.servData({\r\n                page: params.page(),\r\n                count: params.count(),\r\n                sorting: params.sorting(),\r\n                excelExport: true,\r\n                pdfExport: true\r\n            });\r\n            $http.post(home(_export.ngtRoute), _export).success(function (response) {\r\n                if (response && response.file) {\r\n                    window.location = home('console/excel-file?url=' + response.file);\r\n                }\r\n            });\r\n        };\r\n\r\n        s.n.reload = function () {\r\n            s.n.tableParams.reload();\r\n        };\r\n\r\n    }\r\n\r\n    return {\r\n        restrict: 'A',\r\n        link: link,\r\n        scope: {\r\n            n: '=ngtModel'\r\n        }\r\n    }\r\n});","app.controller('ConstCtrl', function ($scope, htp, notify) {\r\n    var _this = $scope;\r\n    var CONST = function ($set, $get) {\r\n        var that = this;\r\n        this.items = [];\r\n        this.errorItems = undefined;\r\n        this.loading = false;\r\n        this.set = $set;\r\n        this.get = $get;\r\n        this.init = function () {\r\n            this.loading = true;\r\n            htp(home(this.get)).then(function (res) {\r\n                if (res && res.result == true) {\r\n                    that.items = res.data;\r\n                }\r\n            }).error(function (res, sts) {\r\n                if (sts == 422) {\r\n                    that.errorItems = res;\r\n                }\r\n            }).after(function () {\r\n                that.loading = false;\r\n            });\r\n        };\r\n        this.add = function () {\r\n            that.errorItems = undefined;\r\n            htp(home(this.set), {title: this.name}).then(function (res) {\r\n                that.init();\r\n                that.name = undefined;\r\n            }).error(function (res, sts) {\r\n                if (sts == 422) {\r\n                    that.errorItems = res;\r\n                }\r\n            }).after(function () {\r\n                that.loading = false;\r\n            });\r\n        };\r\n        this.init();\r\n    };\r\n    _this.flower = new CONST('console/manage/set-const-flower', 'console/manage/get-const-flower');\r\n    _this.pack = new CONST('console/manage/set-const-pack', 'console/manage/get-const-pack');\r\n    _this.cost = new CONST('console/manage/set-const-cost', 'console/manage/get-const-cost');\r\n    _this.user_type = new CONST('console/manage/set-const-user-type', 'console/manage/get-const-user-type');\r\n    \r\n});","app.controller('CostCtrl', function ($scope, htp, notify) {\r\n    var _this = $scope;\r\n    _this.tbl = {};\r\n    _this.uidOpt = {};\r\n    _this.parentOpt = {};\r\n    _this.show_form = false;\r\n    _this.submit = function () {\r\n        _this.loading = true;\r\n        _this.Form.$setValidity('loading', false);\r\n        htp(home('console/cost/add'), _this.data).then(function (res) {\r\n            notify('info', 'سند با موفقیت به ثبت رسید');\r\n            _this.data = {};\r\n            _this.uidOpt.searchText = undefined;\r\n            _this.parentOpt.searchText = undefined;\r\n            _this.Form.$setPristine();\r\n            \r\n            _this.tbl.reload();\r\n        }).error(function (res, sts) {\r\n            if (sts == 422) {\r\n                _this.errorItem = res;\r\n            }\r\n        }).after(function () {\r\n            _this.loading = false;\r\n            _this.Form.$setValidity('loading', true);\r\n        });\r\n    };\r\n});","app.controller('CustomerAddCtrl', function ($scope, htp, $controller, notify) {\r\n    $controller('SubmitController', {$scope: $scope});\r\n    var _this = $scope;\r\n    _this.submiterUrl = 'console/customer/add';\r\n    _this.submiterName = 'مشتری';\r\n\r\n    if (_this.edit_mode) {\r\n        _this.data = _this.dt;\r\n        _.each(_this.data.user_info, function (item, key) {\r\n            if (!_this.data.hasOwnProperty(key)) {\r\n                _this.data[key] = item;\r\n            }\r\n        });\r\n    }\r\n    _this.afterSuccess = function (response) {\r\n        notify('info', 'کد مشتری ثبت شده :' + response.id);\r\n    };\r\n\r\n    var GROUP = function () {\r\n        this.text = undefined;\r\n        this.parent = undefined;\r\n        this.all = [];\r\n        var that = this;\r\n        this.init = function () {\r\n            htp(home('console/customer/get-groups')).then(function (response) {\r\n                if (response && response.result == true) {\r\n                    that.all = response.data;\r\n                }\r\n            });\r\n        };\r\n        this.add = function () {\r\n            this.loading = true;\r\n            var that = this;\r\n            that.errorItem = undefined;\r\n            htp(home('console/customer/add-group'), {\r\n                title: this.text,\r\n                parent: (this.parent) ? this.parent.id : null\r\n            }).then(function (response) {\r\n                that.text = '';\r\n                that.init();\r\n            }).error(function (response, sts) {\r\n                if (sts == 422) {\r\n                    that.errorItem = response;\r\n                }\r\n            }).after(function (response) {\r\n                that.loading = false;\r\n            });\r\n        };\r\n        this.init();\r\n    };\r\n    _this.group = new GROUP();\r\n\r\n    _this.export = function () {\r\n        var arr = _this.findDeep(_this.group.all);\r\n        _this.data.groups = _.map(arr, function (val) {\r\n            return val.id;\r\n        });\r\n        return _this.data;\r\n    };\r\n\r\n    _this.findDeep = function (items) {\r\n        var $export = [];\r\n\r\n        function traverse(value) {\r\n            _.forEach(value, function (val) {\r\n                if (_.isObject(val) && val.hasOwnProperty('child')) {\r\n                    traverse(val.child);\r\n                }\r\n                if (val.has && val.has == true) {\r\n                    $export.push(val);\r\n                }\r\n            });\r\n        }\r\n\r\n        traverse(items);\r\n        return $export;\r\n    };\r\n});","app.controller('CustomerListCtrl', function ($scope, htp, $mdDialog, notify) {\r\n    var _this = $scope;\r\n    _this.tbl = {};\r\n    _this.orderDialog = function (row, ev) {\r\n        var dialog = $mdDialog.show({\r\n                controller: function ($scope, $controller, dt, $mdDialog) {\r\n                    $scope.dt = dt;\r\n                    $scope.edit_mode = true;\r\n                    $scope.data = {};\r\n                    $scope.hide = function () {\r\n                        $mdDialog.hide();\r\n                    };\r\n                    $scope.cancel = function () {\r\n                        $mdDialog.cancel();\r\n                    };\r\n                    $scope.tbl = {};\r\n                    $scope.tbl.postData = function () {\r\n                        return {\r\n                            uid: dt.id\r\n                        }\r\n                    };\r\n\r\n                    var FACTS = function () {\r\n                        this.paid = this.unpaid = this.loyalty = undefined;\r\n                        var that = this;\r\n                        htp(home('console/customer/get-facts-data'), {uid: dt.id}).then(function (response) {\r\n                            if (response && response.result == true) {\r\n                                that.data = response.facts;\r\n                            }\r\n                        });\r\n                    };\r\n                    $scope.facts = new FACTS();\r\n                },\r\n                templateUrl: home('console/customer/get-order-data'),\r\n                parent: angular.element(document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    dt: row\r\n                },\r\n                fullscreen: $scope.customFullscreen // Only for -xs, -sm breakpoints.\r\n            })\r\n            .then(function (answer) {\r\n\r\n            });\r\n    };\r\n\r\n\r\n    _this.ibanDialog = function (row, ev) {\r\n        var dialog = $mdDialog.show({\r\n                controller: function ($scope, $controller, dt, $mdDialog) {\r\n                    $scope.dt = dt;\r\n                    $scope.edit_mode = true;\r\n                    $scope.hide = function () {\r\n                        $mdDialog.hide();\r\n                    };\r\n                    $scope.cancel = function () {\r\n                        $mdDialog.cancel();\r\n                    };\r\n                    $scope.editBtnDialog = function () {\r\n                        $scope.preloader = true;\r\n                        htp(home('console/edit-dialog'), {\r\n                            data: $scope.data\r\n                        }).then(function (response) {\r\n                            $scope.preloader = false;\r\n                            $mdDialog.hide();\r\n                        });\r\n                    };\r\n                    // $controller(ctrl, {$scope: $scope});\r\n                    $scope.init = function ($id) {\r\n                        htp(home('console/customer/get-iden-info'), {id: $id}).then(function (response) {\r\n                            console.log('response', response);\r\n                            $scope.ibans = response;\r\n                        });\r\n                    };\r\n                },\r\n                templateUrl: home('console/customer/iban-info/' + row.id),\r\n                parent: angular.element(document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    dt: row\r\n                },\r\n                fullscreen: $scope.customFullscreen // Only for -xs, -sm breakpoints.\r\n            })\r\n            .then(function (answer) {\r\n\r\n            });\r\n    }\r\n});","app.controller('FlowerAddCtrl', function ($scope, htp, $controller) {\r\n    $controller('SubmitController', {$scope: $scope});\r\n    var _this = $scope;\r\n    _this.submiterUrl = 'console/flower/add';\r\n    _this.submiterName = 'گل';\r\n\r\n    if (_this.edit_mode) {\r\n        _this.data = _this.dt;\r\n    }\r\n    _this.data = {};\r\n    _this.data.composit = [];\r\n    var COMP = function () {\r\n        this.disabled = false;\r\n        this.flower = this.image = undefined;\r\n        this.add = function () {\r\n            _this.data.composit.push({\r\n                flower: this.flower,\r\n                image: this.image\r\n            });\r\n            this.flower = this.image = undefined;\r\n            this.flowerOpt.searchText = undefined;\r\n            this.flowerOpt.selectedItem = undefined;\r\n        };\r\n\r\n        this.remove = function ($index) {\r\n            _this.data.composit = _.without(_this.data.composit, _this.data.composit[$index]);\r\n        };\r\n    };\r\n    _this.afterSuccess = function () {\r\n        _this.data = {};\r\n        _this.data.composit = [];\r\n        _this.comp = new COMP();\r\n    };\r\n    _this.comp = new COMP();\r\n\r\n    var Fls = function ($name) {\r\n        this.errorUploading = undefined;\r\n        this.file = undefined;\r\n        this.success = undefined;\r\n        this.readyUpload = undefined;\r\n        this.progress = undefined;\r\n        this.name = $name;\r\n        this.has = undefined;\r\n        this.finish = true;\r\n        this.url = undefined;\r\n        this.clear = function () {\r\n            this.errorUploading = this.readyUpload = this.file = this.success = this.progress = undefined;\r\n        };\r\n\r\n        this.clearError = function () {\r\n            this.errorUploading = undefined;\r\n        };\r\n\r\n        this.__submit = function () {\r\n            _this._upload(this);\r\n        };\r\n\r\n        this.init = function () {\r\n            this.has = true;\r\n            this.finish = false;\r\n        };\r\n    };\r\n\r\n\r\n    _this._upload = function (fls) {\r\n        fls.clearError();\r\n        fls.uploading = true;\r\n        Upload.upload({\r\n            url: home('console/flower/upload-flower-image'),\r\n            data: {file: fls.file, type: fls.name}\r\n        }).then(function (resp) {\r\n            fls.uploading = false;\r\n            fls.clear();\r\n            fls.success = true;\r\n            fls.finish = true;\r\n            fls.url = resp.data.url;\r\n            var d = new Date();\r\n            _this.data.personal.url = resp.data.url + '?ver=' + d.getTime();\r\n        }, function (resp) {\r\n            fls.errorUploading = true;\r\n            fls.file = undefined;\r\n            fls.uploading = false;\r\n            fls.progress = undefined;\r\n        }, function (evt) {\r\n            fls.progress = parseInt(100.0 * evt.loaded / evt.total);\r\n        });\r\n    };\r\n\r\n    _this.data.flower_picture = new Fls('flower_picture');\r\n\r\n});\r\n\r\n\r\napp.controller('FlowerListCtrl', function ($scope, $mdDialog, htp) {\r\n    var _this = $scope;\r\n    _this.tbl = {};\r\n    _this.showDialog = function (row, ev) {\r\n        console.log(row);\r\n        var dialog = $mdDialog.show({\r\n            controller: function ($scope, $controller, dt, $mdDialog) {\r\n                $scope.dt = dt;\r\n                $scope.edit_mode = true;\r\n                $scope.data = row;\r\n                $scope.hide = function () {\r\n                    $mdDialog.hide();\r\n                };\r\n                $scope.cancel = function () {\r\n                    $mdDialog.cancel();\r\n                };\r\n                $scope.tbl = {};\r\n                $scope.tbl.postData = function () {\r\n                    return {\r\n                        uid: dt.id\r\n                    }\r\n                };\r\n            },\r\n            templateUrl: home('console/flower/data'),\r\n            parent: angular.element(document.body),\r\n            targetEvent: ev,\r\n            clickOutsideToClose: true,\r\n            locals: {\r\n                dt: row\r\n            },\r\n            fullscreen: $scope.customFullscreen // Only for -xs, -sm breakpoints.\r\n        })\r\n            .then(function (answer) {\r\n\r\n            });\r\n    };\r\n});\r\napp.controller('FlowerEditCtrl', function ($scope, htp, $controller) {\r\n    var _this = $scope;\r\n    htp(home('console/flower/get-edit-flower-data'), {id: _this.dt.id}).then(function (resposnne) {\r\n        _this.data = resposnne;\r\n\r\n    });\r\n});","app.controller('FlowerPackageAddCtrl', function ($scope, htp, $controller) {\r\n    $controller('SubmitController', {$scope: $scope});\r\n    var _this = $scope;\r\n    _this.submiterUrl = 'console/flower_package/add';\r\n    _this.submiterName = 'گل';\r\n\r\n    if (_this.edit_mode) {\r\n        _this.data = _this.dt;\r\n    }\r\n    _this.data = {};\r\n    _this.data.composit = [];\r\n    _this.data.combine_arr = [];\r\n    _this.data.tarkibs = [];\r\n    _this.flowers_arr = [];\r\n    _this.data.checkedCombines = [];\r\n\r\n    _this.toggleCheck = function (combine) {\r\n        if (_this.data.checkedCombines.indexOf(combine) === -1) {\r\n            _this.data.checkedCombines.push(combine);\r\n        } else {\r\n            _this.data.checkedCombines.splice(_this.data.checkedCombines.indexOf(combine), 1);\r\n        }\r\n    };\r\n\r\n    var COMP = function () {\r\n        this.disabled = false;\r\n        this.flower = this.flowers  = this.count = undefined;\r\n        htp(home('console/flower_package/flowers-list')).then(function (response) {\r\n            _this.data.flowers = response;\r\n            angular.forEach(response, function (value, key) {\r\n                _this.flowers_arr[value.id] = value;\r\n            });\r\n        });\r\n        this.add = function () {\r\n            _this.data.composit.push({\r\n                flower: this.flower,\r\n                count: this.count\r\n            });\r\n            this.flower = this.count = undefined;\r\n        };\r\n\r\n        this.remove = function ($index) {\r\n            _this.data.composit = _.without(_this.data.composit, _this.data.composit[$index]);\r\n        };\r\n\r\n        this.combine = function(){\r\n            var flowers_variations = [];\r\n            _this.data.composit.forEach(function (t) {\r\n                var flower_v = [];\r\n                _this.flowers_arr[t.flower].variations.forEach(function (s) {\r\n                    flower_v.push(_this.flowers_arr[t.flower].name + ' ' + s.color);\r\n                });\r\n                if(flower_v.length > 0){\r\n                    flowers_variations.push(flower_v);\r\n                }\r\n            });\r\n            var result = [\"\"];\r\n            flowers_variations.forEach(function(arr){\r\n                var tmp = [];\r\n                arr.forEach(function(el){\r\n                    result.forEach(function(curr){\r\n                        tmp.push(curr + el + ' - ');\r\n                    });\r\n                });\r\n                result = tmp;\r\n            });\r\n            _this.data.combine_arr = result;\r\n        };\r\n    };\r\n    _this.afterSuccess = function () {\r\n        _this.data = {};\r\n        _this.data.composit = [];\r\n        _this.comp = new COMP();\r\n    };\r\n    _this.comp = new COMP();\r\n});\r\n\r\n\r\napp.controller('FlowerPackageListCtrl', function ($scope, $mdDialog, htp) {\r\n    var _this = $scope;\r\n    _this.tbl = {};\r\n    _this.showDialog = function (row, ev) {\r\n        var dialog = $mdDialog.show({\r\n            controller: function ($scope, $controller, dt, $mdDialog) {\r\n                $scope.dt = dt;\r\n                $scope.edit_mode = true;\r\n                $scope.data = row;\r\n                $scope.hide = function () {\r\n                    $mdDialog.hide();\r\n                };\r\n                $scope.cancel = function () {\r\n                    $mdDialog.cancel();\r\n                };\r\n                $scope.tbl = {};\r\n                $scope.tbl.postData = function () {\r\n                    return {\r\n                        uid: dt.id\r\n                    }\r\n                };\r\n            },\r\n            templateUrl: home('console/flower_package/data'),\r\n            parent: angular.element(document.body),\r\n            targetEvent: ev,\r\n            clickOutsideToClose: true,\r\n            locals: {\r\n                dt: row\r\n            },\r\n            fullscreen: $scope.customFullscreen // Only for -xs, -sm breakpoints.\r\n        })\r\n            .then(function (answer) {\r\n\r\n            });\r\n    };\r\n});","app.controller('FlowerPacketAddCtrl', function ($scope, htp, $controller) {\r\n    $controller('SubmitController', {$scope: $scope});\r\n    var _this = $scope;\r\n    _this.submiterUrl = 'console/flower_packet/add';\r\n    _this.submiterName = 'بسته';\r\n\r\n    if (_this.edit_mode) {\r\n        _this.data = _this.dt;\r\n    }\r\n    _this.data = {};\r\n    _this.data.composit = [];\r\n    _this.data.combine_arr = [];\r\n    _this.data.tarkibs = [];\r\n    _this.flowers_arr = [];\r\n    _this.data.checkedCombines = [];\r\n\r\n    _this.toggleCheck = function (combine) {\r\n        if (_this.data.checkedCombines.indexOf(combine) === -1) {\r\n            _this.data.checkedCombines.push(combine);\r\n        } else {\r\n            _this.data.checkedCombines.splice(_this.data.checkedCombines.indexOf(combine), 1);\r\n        }\r\n    };\r\n\r\n    var COMP = function () {\r\n        this.disabled = false;\r\n        this.package = this.packages = undefined;\r\n        htp(home('console/flower_packet/packages-list')).then(function (response) {\r\n            _this.data.packages = response;\r\n            _this.packages_arr = [];\r\n            for(var i = 0; i < response.length; i++){\r\n                _this.packages_arr[response[i].id] = response[i];\r\n            }\r\n        });\r\n        this.add = function () {\r\n            _this.data.composit.push({\r\n                package: this.package\r\n            });\r\n            this.package = undefined;\r\n        };\r\n\r\n        this.remove = function ($index) {\r\n            _this.data.composit = _.without(_this.data.composit, _this.data.composit[$index]);\r\n        };\r\n    };\r\n    _this.afterSuccess = function () {\r\n        _this.data = {};\r\n        _this.data.composit = [];\r\n        _this.comp = new COMP();\r\n    };\r\n    _this.comp = new COMP();\r\n});\r\n\r\n\r\napp.controller('FlowerPacketListCtrl', function ($scope, $mdDialog, htp) {\r\n    var _this = $scope;\r\n    _this.tbl = {};\r\n    _this.showDialog = function (row, ev) {\r\n        console.log(row);\r\n        var dialog = $mdDialog.show({\r\n            controller: function ($scope, $controller, dt, $mdDialog) {\r\n                $scope.dt = dt;\r\n                $scope.edit_mode = true;\r\n                $scope.data = row;\r\n                $scope.hide = function () {\r\n                    $mdDialog.hide();\r\n                };\r\n                $scope.cancel = function () {\r\n                    $mdDialog.cancel();\r\n                };\r\n                $scope.tbl = {};\r\n                $scope.tbl.postData = function () {\r\n                    return {\r\n                        uid: dt.id\r\n                    }\r\n                };\r\n            },\r\n            templateUrl: home('console/flower_packet/data'),\r\n            parent: angular.element(document.body),\r\n            targetEvent: ev,\r\n            clickOutsideToClose: true,\r\n            locals: {\r\n                dt: row\r\n            },\r\n            fullscreen: $scope.customFullscreen // Only for -xs, -sm breakpoints.\r\n        })\r\n            .then(function (answer) {\r\n\r\n            });\r\n    };\r\n});","app.controller('CustomerGroupCtrl', function ($scope, htp , notify) {\r\n    var _this = $scope;\r\n    _this.chipOpt = {};\r\n    _this.chipCusOpt = {};\r\n    _this.data = {};\r\n    _this.data.groups = [];\r\n    _this.data.customers = [];\r\n\r\n    _this.submit = function () {\r\n        _this.loading = true;\r\n        htp(home('console/customer/set-groups'), _this.data).then(function (response) {\r\n            notify('info', 'انتصاب با موفقیت اعمال گردید');\r\n            _this.data.groups = [];\r\n            _this.data.customers = [];\r\n        }).after(function (response) {\r\n            _this.loading = false;\r\n        }).error(function (response, sts) {\r\n            if (sts == 422) {\r\n                _this.errorItem = response;\r\n            }\r\n        });\r\n    };\r\n    var GROUP = function () {\r\n        this.text = undefined;\r\n        this.parent = undefined;\r\n        this.all = [];\r\n        var that = this;\r\n        this.init = function () {\r\n            htp(home('console/customer/get-groups')).then(function (response) {\r\n                if (response && response.result == true) {\r\n                    that.all = response.data;\r\n                }\r\n            });\r\n        };\r\n        this.add = function () {\r\n            this.loading = true;\r\n            var that = this;\r\n            that.errorItem = undefined;\r\n            htp(home('console/customer/add-group'), {\r\n                title: this.text,\r\n                parent: (this.parent) ? this.parent.id : null\r\n            }).then(function (response) {\r\n                that.text = '';\r\n                that.init();\r\n            }).error(function (response, sts) {\r\n                if (sts == 422) {\r\n                    that.errorItem = response;\r\n                }\r\n            }).after(function (response) {\r\n                that.loading = false;\r\n            });\r\n        };\r\n        this.init();\r\n    };\r\n    _this.group = new GROUP();\r\n\r\n});","app.controller('LogCtrl', function ($scope, htp) {\r\n    var _this = $scope;\r\n    _this.tbl = {};\r\n});","app.controller('OrderListCtrl', function ($scope, htp, $mdDialog, NgTableParams) {\r\n    var _this = $scope;\r\n\r\n    _this.tbl = {};\r\n\r\n\r\n    _this.setVisitor = function (row) {\r\n        row.visitor_loading = true;\r\n        htp(home('console/order/set-visitor'), {id: row.id}).then(function (response) {\r\n            _this.tbl.reload();\r\n        }).after(function () {\r\n            row.visitor_loading = false;\r\n        });\r\n    };\r\n\r\n    _this.setSender = function (row) {\r\n        row.sender_loading = true;\r\n        htp(home('console/order/set-sender'), {id: row.id}).then(function (response) {\r\n            _this.tbl.reload();\r\n        }).after(function () {\r\n            row.sender_loading = false;\r\n        });\r\n    };\r\n\r\n    _this.setSts = function (row) {\r\n        row.sts_loading = true;\r\n        htp(home('console/order/set-sts'), {id: row.id, sts: row.sts}).then(function (response) {\r\n            _this.tbl.reload();\r\n        }).after(function () {\r\n            row.sts_loading = false;\r\n        });\r\n    };\r\n\r\n    _this.init = function (row) {\r\n        row.extra_loading = true;\r\n        row.order_items = undefined;\r\n        htp(home('console/order/get-order-items'), {id: row.id}).then(function (response) {\r\n            row.order_items = response;\r\n        }).after(function () {\r\n            row.extra_loading = false;\r\n        });\r\n    };\r\n    _this.editProductListDialog = function (ev, row) {\r\n        var dialog = $mdDialog.show({\r\n                controller: function ($scope, $controller, row, id) {\r\n                    $scope.data = row;\r\n                    $scope.edit_mode = true;\r\n                    $scope.hide = function () {\r\n                        $mdDialog.hide();\r\n                    };\r\n                    $scope.cancel = function () {\r\n                        $mdDialog.cancel();\r\n                    };\r\n                    $scope.editBtnDialog = function () {\r\n                        $scope.preloader = true;\r\n                        htp(home('console/order/edit-product-list'), {\r\n                            id: id,\r\n                            data: $scope.data\r\n                        }).then(function (response) {\r\n                            $scope.preloader = false;\r\n                            $mdDialog.hide();\r\n                            _this.init(row);\r\n                            _this.tbl.reload();\r\n                        });\r\n                    };\r\n                    var __this = $scope;\r\n                    __this.data.order_item = [];\r\n                    _.each(__this.data.order_items, function (item) {\r\n                        __this.data.order_item.push(angular.extend(item, {value: item.product_name.title}));\r\n                    });\r\n                    $controller('OrderProductTable', {$scope: $scope});\r\n                    __this.$watch('data.order_item', function (n) {\r\n                        console.log('n', n);\r\n                    }, true);\r\n\r\n                },\r\n                templateUrl: home('console/order/product-list-edit'),\r\n                parent: angular.element(document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    row: row,\r\n                    id: row.id\r\n                },\r\n                fullscreen: $scope.customFullscreen // Only for -xs, -sm breakpoints.\r\n            })\r\n            .then(function (answer) {\r\n\r\n            });\r\n    };\r\n\r\n});\r\n\r\napp.controller('OrderProductTable', function ($scope, htp, NgTableParams) {\r\n    var _this = $scope;\r\n    if (!_this.data) {\r\n        _this.data = {};\r\n        _this.data.order_item = [];\r\n    }\r\n    _this.tableParams = new NgTableParams({}, {\r\n        dataset: _this.data.order_item,\r\n        counts: [] // hides page sizes\r\n    });\r\n    _this.prc = {};\r\n    _this.prc.remove = function ($index) {\r\n        _this.data.order_item = _.without(_this.data.order_item, _this.data.order_item[$index]);\r\n        _this.tableParams = new NgTableParams({}, {\r\n            dataset: _this.data.order_item,\r\n            counts: [] // hides page sizes\r\n        });\r\n    };\r\n    _this.tableParams.show_filter = false;\r\n    _this.addProduct = function (item) {\r\n        if (!item.total) {\r\n            item.total = 1;\r\n        }\r\n        _this.data.order_item.push(item);\r\n        _this.tableParams.reload();\r\n        _this.prc.itemOpt = {};\r\n        _this.prc.item = {};\r\n    };\r\n    _this.$watch('prc.item.id', function (n) {\r\n        if (n) {\r\n            _this.addProduct(_this.prc.item);\r\n        }\r\n    });\r\n\r\n    _this.$watch('data.order_item', function (n) {\r\n        if (n) {\r\n            _this.data.total = 0;\r\n            for (var i in n) {\r\n                _this.data.total += parseInt(n[i].price) * parseInt(n[i].total);\r\n            }\r\n        }\r\n    }, true);\r\n});\r\n\r\napp.controller('OrderAddCtrl', function ($scope, htp, $controller, NgTableParams) {\r\n    $controller('OrderProductTable', {$scope: $scope});\r\n    $controller('SubmitController', {$scope: $scope});\r\n    var _this = $scope;\r\n    _this.submiterUrl = 'console/order/add';\r\n    _this.submiterName = 'فاکتور';\r\n\r\n    if (_this.edit_mode) {\r\n        _this.data = _this.dt;\r\n    }\r\n    if (!_this.data) {\r\n        _this.data = {};\r\n    }\r\n    _this.data.when = 1;\r\n    _this.data.total = 0;\r\n    _this.afterSuccess = function () {\r\n        // window.location.reload();\r\n    };\r\n    _this.data.sts = -1;\r\n});\r\n\r\napp.controller('OrderEditCtrl', function ($scope, htp) {\r\n    var _this = $scope;\r\n    _this.data = _this.dt;\r\n    _this.customer = {};\r\n    _this.visitor = {};\r\n    _this.sender = {};\r\n    _this.customer.itemOpt = {};\r\n    _this.visitor.itemOpt = {};\r\n    _this.sender.itemOpt = {};\r\n    htp(home('console/order/get-edit-data'), {id: _this.dt.id})\r\n        .then(function (response) {\r\n            _this.data = response;\r\n\r\n            if (_this.data.customer) {\r\n                _this.customer.itemOpt.searchText = _this.data.customer.value;\r\n            }\r\n\r\n            if (_this.data.visitor) {\r\n                _this.visitor.itemOpt.searchText = _this.data.visitor.value;\r\n            }\r\n\r\n            if (_this.data.sender) {\r\n                _this.sender.itemOpt.searchText = _this.data.sender.value;\r\n            }\r\n        })\r\n        .error(function (response, sts) {\r\n            if (sts == 422) {\r\n                _this.errorItem = response;\r\n            }\r\n        })\r\n        .after(function () {\r\n\r\n        });\r\n});","app.controller('OrderReportCtrl', function ($scope, htp) {\r\n    var _this = $scope;\r\n    var REPORT = function (url) {\r\n        this.url = url;\r\n        this.date = undefined;\r\n        var that = this;\r\n        if (!this.chart) {\r\n            this.chart = {};\r\n        }\r\n        this.load = function () {\r\n            this.loading = true;\r\n            htp(home(this.url), {date: this.date}).then(function (res) {\r\n                that.dt = res.dt;\r\n                that.date = res.date;\r\n                that.chart.load();\r\n            }).error(function (res, sts) {\r\n                if (sts == 422) {\r\n                    that.errorItem = res;\r\n                }\r\n            }).after(function () {\r\n                that.loading = false;\r\n            });\r\n        };\r\n        this.chart.send = function () {\r\n            return angular.extend(that.dt, {date: that.date});\r\n        };\r\n        this.load();\r\n    };\r\n    _this.day = new REPORT('console/order/get-day-report-data');\r\n    _this.week = new REPORT('console/order/get-week-report-data');\r\n    _this.month = new REPORT('console/order/get-month-report-data');\r\n\r\n    _this.week.chart.options =\r\n    {\r\n        scales: {\r\n            yAxes: [{\r\n                stacked: true,\r\n                ticks: {\r\n                    stepSize: 1\r\n                }\r\n            }]\r\n        }\r\n    };\r\n\r\n    _this.month.chart.options =\r\n    {\r\n        scales: {\r\n            yAxes: [{\r\n                stacked: true,\r\n                ticks: {\r\n                    stepSize: 1\r\n                }\r\n            }]\r\n        }\r\n    };\r\n\r\n});","app.controller('ProductAddCtrl', function ($scope, htp, $controller) {\r\n    $controller('SubmitController', {$scope: $scope});\r\n    var _this = $scope;\r\n    _this.submiterUrl = 'console/product/add';\r\n    _this.submiterName = 'محصول';\r\n\r\n    if (_this.edit_mode) {\r\n        _this.data = _this.dt;\r\n    }\r\n    _this.data = {};\r\n    _this.data.composit = [];\r\n    var COMP = function () {\r\n        this.disabled = false;\r\n        this.flower = this.total = undefined;\r\n        this.add = function () {\r\n            _this.data.composit.push({\r\n                flower: this.flower,\r\n                total: this.total\r\n            });\r\n            this.flower = this.total = undefined;\r\n            this.flowerOpt.searchText = undefined;\r\n            this.flowerOpt.selectedItem = undefined;\r\n        };\r\n\r\n        this.remove = function ($index) {\r\n            _this.data.composit = _.without(_this.data.composit, _this.data.composit[$index]);\r\n        };\r\n    };\r\n    _this.afterSuccess = function () {\r\n        _this.data = {};\r\n        _this.data.composit = [];\r\n        _this.comp = new COMP();\r\n    };\r\n    _this.comp = new COMP();\r\n});\r\n\r\n\r\napp.controller('ProductListCtrl', function ($scope, htp) {\r\n    var _this = $scope;\r\n    _this.tbl = {};\r\n});","app.controller('ProfileCtrl', function ($scope, Upload, htp) {\r\n    var _this = $scope;\r\n    _this.data = {};\r\n    _this.pass = {};\r\n    _this.errorItem = {};\r\n\r\n\r\n    _this.$watch('pass.new', function (n) {\r\n        if (_this.PassForm)\r\n            _this.PassForm.$setValidity('confirm.confirm', isConfirm());\r\n    });\r\n\r\n    _this.$watch('pass.confirm', function (n) {\r\n        if (_this.PassForm)\r\n            _this.PassForm.$setValidity('confirm.confirm', isConfirm());\r\n    });\r\n\r\n    var isConfirm = function () {\r\n        return _this.pass.new == _this.pass.confirm;\r\n    };\r\n\r\n\r\n    htp(home('console/profile/get-user-data')).then(function (response) {\r\n        _this.data = response;\r\n        _this.data.personal = new Fls('personal');\r\n        _this.data.personal.url = '';\r\n        _this.data.personal.url = home(_this.data.personal_picture);\r\n    });\r\n\r\n\r\n    _this.edit = function () {\r\n        htp(home('console/profile/edit'), _this.data).saveSend('Profile');\r\n    };\r\n\r\n\r\n    _this.password = function () {\r\n        htp(home('console/profile/change-password'), _this.pass).saveSend('Password').errorNotice(function (response) {\r\n            _this.errorItem = response;\r\n        });\r\n    };\r\n\r\n    _this.$watch('errorItem', function (n) {\r\n        console.log('n', n);\r\n    });\r\n\r\n    var Fls = function ($name) {\r\n        this.errorUploading = undefined;\r\n        this.file = undefined;\r\n        this.success = undefined;\r\n        this.readyUpload = undefined;\r\n        this.progress = undefined;\r\n        this.name = $name;\r\n        this.has = undefined;\r\n        this.finish = true;\r\n        this.url = undefined;\r\n        this.clear = function () {\r\n            this.errorUploading = this.readyUpload = this.file = this.success = this.progress = undefined;\r\n        };\r\n\r\n        this.clearError = function () {\r\n            this.errorUploading = undefined;\r\n        };\r\n\r\n        this.__submit = function () {\r\n            _this._upload(this);\r\n        };\r\n\r\n        this.init = function () {\r\n            this.has = true;\r\n            this.finish = false;\r\n        };\r\n    };\r\n\r\n\r\n    _this._upload = function (fls) {\r\n        fls.clearError();\r\n        fls.uploading = true;\r\n        Upload.upload({\r\n            url: home('console/profile/upload-profile-image'),\r\n            data: {file: fls.file, type: fls.name}\r\n        }).then(function (resp) {\r\n            fls.uploading = false;\r\n            fls.clear();\r\n            fls.success = true;\r\n            fls.finish = true;\r\n            fls.url = resp.data.url;\r\n            var d = new Date();\r\n            _this.data.personal.url = resp.data.url + '?ver=' + d.getTime();\r\n        }, function (resp) {\r\n            fls.errorUploading = true;\r\n            fls.file = undefined;\r\n            fls.uploading = false;\r\n            fls.progress = undefined;\r\n        }, function (evt) {\r\n            fls.progress = parseInt(100.0 * evt.loaded / evt.total);\r\n        });\r\n    };\r\n\r\n});","app.controller('RoleCtrl', function ($scope, htp) {\r\n    var _this = $scope;\r\n    _this.check = {};\r\n    _this.submit = function () {\r\n        _this._export();\r\n        htp(home('console/manage/set-roles'), _this.data).saveSend('قوانین');\r\n    };\r\n    _this.data = {};\r\n\r\n\r\n    _this.init = function () {\r\n        _this.loading = true;\r\n        htp(home('console/manage/get-roles'), {user_type: _this.data.user_type}).then(function (response) {\r\n            _this.data.roles = response;\r\n            _this.data_back = true;\r\n        }).after(function () {\r\n            _this.loading = false;\r\n        });\r\n    };\r\n\r\n    _this.$watch('data.user_type', function (n) {\r\n        if (n) {\r\n            _this.init();\r\n        }\r\n    });\r\n\r\n    _this.isIndeterminate = function () {\r\n        return true;\r\n    };\r\n\r\n    _this._export = function () {\r\n        var _tmp = [];\r\n        var hasExport = function (obj) {\r\n            if (obj.children) {\r\n                _.each(obj.children, function (item) {\r\n                    hasExport(item);\r\n                });\r\n            }\r\n            if (obj.has && obj.has == true) {\r\n                _tmp.push(obj._rid);\r\n            }\r\n        };\r\n        _.each(_this.data.roles, function (ite) {\r\n            hasExport(ite);\r\n        });\r\n        return _this.data.export = _tmp;\r\n    };\r\n\r\n    _this.parent = function (type, rid) {\r\n        if (_this.data[type][rid] == true) {\r\n            for (var i = rid; Math.floor(i / 100) > 0;) {\r\n                i = Math.floor(i / 100);\r\n                _this.data[type][i] = true;\r\n            }\r\n        }\r\n\r\n    };\r\n});\r\n\r\napp.directive('collection', function () {\r\n    return {\r\n        restrict: \"E\",\r\n        replace: true,\r\n        scope: {\r\n            collection: '='\r\n        },\r\n        template: \"<div class='inner collection'><member ng-repeat='member in collection' member='member'></member></div>\"\r\n    }\r\n\r\n});\r\n\r\napp.directive('member', function ($compile) {\r\n    return {\r\n        restrict: \"E\",\r\n        replace: true,\r\n        scope: {\r\n            member: '='\r\n        },\r\n        templateUrl: home('console/manage/role-list-template'),\r\n        link: function (scope, element, attrs) {\r\n            scope.isIn = function () {\r\n                var r = false;\r\n                var e = _.map(scope.member.children, function (item, key) {\r\n                    if (item.has || item.parent) {\r\n                        r = true;\r\n                        scope.member.children[key].parent = true;\r\n                    }\r\n                    return item.has;\r\n                });\r\n                return r;\r\n            };\r\n            if (angular.isObject(scope.member.children)) {\r\n                var tmp = \"<collection collection='member.children' ng-show='member.show' class='collection'></collection>\";\r\n                var $content = $compile(tmp)(scope);\r\n                element.append($content);\r\n\r\n                scope.toggleShow = function (member) {\r\n                    if (member.show == undefined) {\r\n                        member.show = true;\r\n                    } else {\r\n                        member.show = !member.show;\r\n                    }\r\n                };\r\n            }\r\n        }\r\n    }\r\n});\r\n","app.directive('useChartJs', function (htp) {\r\n    function link(s, elem, attr) {\r\n        if (!s.n) {\r\n            s.n = {};\r\n        }\r\n        s.n.load = function () {\r\n            var dt = {};\r\n            if (s.n.send) {\r\n                dt = s.n.send();\r\n            }\r\n            htp(home(attr.link), dt).then(function (response) {\r\n                console.log('response', response);\r\n                s.n = angular.extend(s.n, response);\r\n            });\r\n        };\r\n\r\n        s.n.load();\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    return {\r\n        restrict: 'A',\r\n        scope: {\r\n            n: '=ngModel'\r\n        },\r\n        link: link\r\n    };\r\n});\r\n","app.directive('useSelectSm', function (htp) {\r\n    function link(s, elem, attr) {\r\n        $(elem).dropdown({\r\n            onChange: function (value, text, choise) {\r\n                s.n = value;\r\n                s.$apply();\r\n            }\r\n        });\r\n        if (s.n) {\r\n            $(elem).dropdown('set selected', s.n);\r\n        }\r\n    }\r\n\r\n    return {\r\n        restrict: 'A',\r\n        scope: {\r\n            n: '=ngModel'\r\n        },\r\n        link: link\r\n    };\r\n});\r\n","app.directive('groupCollection', function () {\r\n    return {\r\n        restrict: \"E\",\r\n        replace: true,\r\n        scope: {\r\n            collection: '=',\r\n            url: '='\r\n        },\r\n        template: \"<div class='inner collection group'><group-member ng-repeat='member in collection' member='member' url='url'></group-member></div>\"\r\n    }\r\n});\r\n\r\napp.directive('groupMember', function ($compile) {\r\n    return {\r\n        restrict: \"E\",\r\n        replace: true,\r\n        scope: {\r\n            member: '=',\r\n            url: '='\r\n        },\r\n        templateUrl: function (element, attr) {\r\n            return home('console/group-collection');\r\n        },\r\n        link: function (scope, element, attrs) {\r\n            if (angular.isObject(scope.member.child)) {\r\n                var tmp = \"<group-collection collection='member.child' class='collection'></group-collection>\";\r\n                var $content = $compile(tmp)(scope);\r\n                element.append($content);\r\n            }\r\n        }\r\n    }\r\n});"]}